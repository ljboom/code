(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesA-gupiao-detail"],{"0449":function(t,i,e){"use strict";var n;e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return n}));var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"u-line",style:[t.lineStyle]})},s=[]},"13b2":function(t,i,e){"use strict";e.r(i);var n=e("1e06"),a=e("23ab");for(var s in a)"default"!==s&&function(t){e.d(i,t,(function(){return a[t]}))}(s);e("2f437");var u,o=e("f0c5"),l=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"29c20830",null,!1,n["a"],u);i["default"]=l.exports},"1e06":function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return n}));var n={uNavbar:e("5ed9").default,uIcon:e("76cd").default,uTabs:e("febd").default,qiunDataCharts:e("9361").default,uSubsection:e("28df").default,uGap:e("bc08").default,uNumberBox:e("948b").default,uButton:e("3954").default,uLine:e("370b").default,uToast:e("d6eb").default,uModal:e("c4c6").default},a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"wrap"},[e("u-navbar",{attrs:{title:t.gupiao.name}}),e("v-uni-view",{staticClass:"hd u-padding-30 u-relative"},[e("v-uni-view",{staticClass:"zixuan",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.addZixuan.apply(void 0,arguments)}}},[e("u-icon",{attrs:{name:t.zixuan_status,label:"加自選","label-color":"#fff"}})],1),e("v-uni-view",{staticClass:"u-font-40"},[t._v(t._s(t.gupiao.name))]),e("v-uni-view",{staticClass:"u-flex"},[e("v-uni-view",{staticClass:"u-flex-1 u-font-36"},[t._v(t._s(t.gupiao.price))]),e("v-uni-view",{staticClass:"u-flex-1"},[e("v-uni-view",[t.gupiao.zhangdieshu>0?e("v-uni-text",[t._v("+")]):t._e(),t._v(t._s(t.gupiao.zhangdieshu))],1),e("v-uni-view",[t.gupiao.zhangdiebaifenbi>0?e("v-uni-text",[t._v("+")]):t._e(),t._v(t._s(t.gupiao.zhangdiebaifenbi)+"%")],1)],1)],1),e("v-uni-view",{staticClass:"u-flex"},[e("v-uni-view",{staticClass:"u-flex-1"},[t._v("今開價:"+t._s(t.gupiao.open))]),e("v-uni-view",{staticClass:"u-flex-1"},[t._v("昨收價:"+t._s(t.gupiao.close))])],1),e("v-uni-view",{staticClass:"u-flex"},[e("v-uni-view",{staticClass:"u-flex-1"},[t._v("最高價:"+t._s(t.gupiao.high))]),e("v-uni-view",{staticClass:"u-flex-1"},[t._v("最低價:"+t._s(t.gupiao.low))])],1)],1),e("v-uni-view",{staticClass:"content"},[e("u-tabs",{attrs:{list:t.list,"is-scroll":!1,current:t.current,"active-color":"#f00"},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.change_interval.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"charts-box",staticStyle:{height:"600rpx"}},[e("qiun-data-charts",{attrs:{type:"candle",opts:{extra:{tooltip:{showCategory:!0}},xAxis:{scrollAlign:"right",disabled:!0}},ontouch:!0,canvas2d:!0,onzoom:!0,canvasId:"klineid",chartData:t.chartsDataCandle1}})],1)],1),e("v-uni-view",{staticClass:"container u-flex u-col-top"},[e("v-uni-view",{staticClass:"u-flex-1 u-margin-right-10"},[e("u-subsection",{attrs:{list:t.price_type,current:t.curNow,"active-color":"#fff","button-color":"#2979ff"},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.sectionChange.apply(void 0,arguments)}}}),e("u-gap",{attrs:{height:"30"}}),e("v-uni-view",{staticClass:"u-flex u-row-center"},[t.show_nowprice?e("u-number-box",{attrs:{"positive-integer":!1,step:.1,"input-width":"200","input-height":"70"},model:{value:t.nowgupiao,callback:function(i){t.nowgupiao=i},expression:"nowgupiao"}}):t._e()],1),e("u-gap",{attrs:{height:"30"}}),e("v-uni-view",[t._v("數量（張）")]),e("v-uni-view",{staticClass:"u-flex u-row-center"},[e("u-number-box",{attrs:{"positive-integer":!1,"input-width":"200","input-height":"70"},model:{value:t.zhangshu,callback:function(i){t.zhangshu=i},expression:"zhangshu"}})],1),e("u-gap",{attrs:{height:"30"}}),e("u-subsection",{attrs:{list:t.buy_type,current:t.curNow2,"active-color":"#fff","button-color":"#f00"},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.sectionChange2.apply(void 0,arguments)}}}),e("u-gap",{attrs:{height:"30"}}),e("u-button",{attrs:{type:"primary"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.open_buy_modal.apply(void 0,arguments)}}},[t._v("買入")])],1),e("v-uni-view",{staticClass:"pankou u-flex-1 u-margin-left-10"},[e("v-uni-view",{staticClass:"weisell u-flex"},[e("v-uni-view",[t._v("委賣")]),e("v-uni-view",{staticClass:"list u-flex-1 u-margin-left-20"},[e("v-uni-view",{staticClass:"item u-flex"},[e("v-uni-view",{staticClass:"u-content-color u-font-24"},[t._v(t._s(t.pankou.sell5_price))]),e("v-uni-view",{staticClass:"u-light-color u-font-24 u-text-right u-flex-1"},[t._v(t._s(t.pankou.sell5_num))])],1),e("v-uni-view",{staticClass:"item u-flex"},[e("v-uni-view",{staticClass:"u-content-color u-font-24"},[t._v(t._s(t.pankou.sell4_price))]),e("v-uni-view",{staticClass:"u-light-color u-font-24 u-text-right u-flex-1"},[t._v(t._s(t.pankou.sell4_num))])],1),e("v-uni-view",{staticClass:"item u-flex"},[e("v-uni-view",{staticClass:"u-content-color u-font-24"},[t._v(t._s(t.pankou.sell3_price))]),e("v-uni-view",{staticClass:"u-light-color u-font-24 u-text-right u-flex-1"},[t._v(t._s(t.pankou.sell3_num))])],1),e("v-uni-view",{staticClass:"item u-flex"},[e("v-uni-view",{staticClass:"u-content-color u-font-24"},[t._v(t._s(t.pankou.sell2_price))]),e("v-uni-view",{staticClass:"u-light-color u-font-24 u-text-right u-flex-1"},[t._v(t._s(t.pankou.sell2_num))])],1),e("v-uni-view",{staticClass:"item u-flex"},[e("v-uni-view",{staticClass:"u-content-color u-font-24"},[t._v(t._s(t.pankou.sell1_price))]),e("v-uni-view",{staticClass:"u-light-color u-font-24 u-text-right u-flex-1"},[t._v(t._s(t.pankou.sell1_num))])],1)],1)],1),e("u-line",{attrs:{color:"gray"}}),e("v-uni-view",{staticClass:"weibuy u-flex"},[e("v-uni-view",[t._v("委買")]),e("v-uni-view",{staticClass:"list u-flex-1 u-margin-left-20"},[e("v-uni-view",{staticClass:"item u-flex"},[e("v-uni-view",{staticClass:"u-content-color u-font-24"},[t._v(t._s(t.pankou.buy1_price))]),e("v-uni-view",{staticClass:"u-light-color u-font-24 u-text-right u-flex-1"},[t._v(t._s(t.pankou.buy1_num))])],1),e("v-uni-view",{staticClass:"item u-flex"},[e("v-uni-view",{staticClass:"u-content-color u-font-24"},[t._v(t._s(t.pankou.buy2_price))]),e("v-uni-view",{staticClass:"u-light-color u-font-24 u-text-right u-flex-1"},[t._v(t._s(t.pankou.buy2_num))])],1),e("v-uni-view",{staticClass:"item u-flex"},[e("v-uni-view",{staticClass:"u-content-color u-font-24"},[t._v(t._s(t.pankou.buy3_price))]),e("v-uni-view",{staticClass:"u-light-color u-font-24 u-text-right u-flex-1"},[t._v(t._s(t.pankou.buy3_num))])],1),e("v-uni-view",{staticClass:"item u-flex"},[e("v-uni-view",{staticClass:"u-content-color u-font-24"},[t._v(t._s(t.pankou.buy4_price))]),e("v-uni-view",{staticClass:"u-light-color u-font-24 u-text-right u-flex-1"},[t._v(t._s(t.pankou.buy4_num))])],1),e("v-uni-view",{staticClass:"item u-flex"},[e("v-uni-view",{staticClass:"u-content-color u-font-24"},[t._v(t._s(t.pankou.buy5_price))]),e("v-uni-view",{staticClass:"u-light-color u-font-24 u-text-right u-flex-1"},[t._v(t._s(t.pankou.buy5_num))])],1)],1)],1)],1)],1),e("u-toast",{ref:"uToast"}),e("u-modal",{attrs:{content:"確定買入嗎？","confirm-text":"確定","show-cancel-button":!0},on:{confirm:function(i){arguments[0]=i=t.$handleEvent(i),t.addOrder.apply(void 0,arguments)}},model:{value:t.show_buy_modal,callback:function(i){t.show_buy_modal=i},expression:"show_buy_modal"}})],1)},s=[]},"23ab":function(t,i,e){"use strict";e.r(i);var n=e("2479"),a=e.n(n);for(var s in n)"default"!==s&&function(t){e.d(i,t,(function(){return n[t]}))}(s);i["default"]=a.a},2479:function(t,i,e){"use strict";e("acd8"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n={data:function(){return{gupiao:{name:"",price:0,zhangdieshu:0,zhangdiebaifenbi:0,open:0,close:0,high:0,low:0},id:0,interval:"d",chartsDataCandle1:{categories:[],series:[{name:"",data:[]}]},colorList:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],labelFont:"bold 12px Sans-serif",list:[{name:"日K"},{name:"5分"},{name:"15分"},{name:"30分"},{name:"60分"}],current:0,price_type:[{name:"限價"},{name:"市價"}],curNow:0,buy_type:[{name:"買多"},{name:"買空"}],curNow2:0,nowgupiao:0,show_nowprice:!0,zhangshu:1,fangxiang:"duo",buytype_data:1,show_buy_modal:!1,ZhishusocketTask:null,timer1:null,GetKsocketTask:null,timer2:null,zixuan_status:"star",PankouSocket:null,timer3:null,pankou:{sell5_price:0,sell3_num:0,sell2_num:0,sell1_num:0,sell4_num:0,sell5_num:0,buy1_price:0,buy1_num:0,buy2_num:0,buy3_num:0,buy4_num:0,buy5_num:0}}},onLoad:function(t){var i=this;this.id=t.id,this.getGupiaoDetail(this.id),this.getpankou(),this.isZixuan(),this.$u.api.getGupiaoKline({id:this.id,interval:this.interval}).then((function(t){console.log(t),i.chartsDataCandle1=t}))},onShow:function(){var t=this;this.ZhishusocketTask=uni.connectSocket({url:getApp().globalData.socket_domain+":2001",success:function(){console.log("socket success")},fail:function(){console.log("socket fail")}}),this.ZhishusocketTask.onMessage((function(i){i=JSON.parse(i.data),t.gupiao=i})),this.timer1=setInterval((function(){t.ZhishusocketTask.send({data:"getgupiao_"+t.id,success:function(){},fail:function(){}})}),5e3),this.GetKsocketTask=uni.connectSocket({url:getApp().globalData.socket_domain+":2003",success:function(){console.log("socket success")},fail:function(){console.log("socket fail")}}),this.GetKsocketTask.onMessage((function(i){i=JSON.parse(i.data),i&&(t.chartsDataCandle1=i)})),this.GetKsocketTask.onClose((function(){console.log("关闭GetKsocketTask")})),this.GetKsocketTask.send({data:"getgupiaok_"+t.id+"_d",success:function(){},fail:function(){}}),this.timer2=setInterval((function(){t.GetKsocketTask.send({data:"getgupiaok_"+t.id+"_"+t.interval,success:function(){},fail:function(){}})}),3e3),this.PankouSocket=uni.connectSocket({url:getApp().globalData.socket_domain+":2005",success:function(){console.log("连接PankouSocket")},fail:function(){console.log("socket fail")}}),this.PankouSocket.onMessage((function(i){i=JSON.parse(i.data),i&&(t.pankou=i)})),this.PankouSocket.onClose((function(){console.log("关闭PankouSocket")})),this.PankouSocket.send({data:"getpankou_"+t.id,success:function(){},fail:function(){}}),this.timer3=setInterval((function(){t.PankouSocket.send({data:"getpankou_"+t.id,success:function(){},fail:function(){}})}),3e3)},onUnload:function(){this.ZhishusocketTask.close(),this.ZhishusocketTask=null,this.GetKsocketTask.close(),this.GetKsocketTask=null,this.PankouSocket.close(),this.PankouSocket=null,clearInterval(this.timer1),clearInterval(this.timer2),clearInterval(this.timer3),this.timer1=null,this.timer2=null,this.timer3=null},onHide:function(){this.ZhishusocketTask.close(),this.ZhishusocketTask=null,this.GetKsocketTask.close(),this.GetKsocketTask=null,this.PankouSocket.close(),this.PankouSocket=null,clearInterval(this.timer1),clearInterval(this.timer2),clearInterval(this.timer3),this.timer1=null,this.timer2=null,this.timer3=null},methods:{getGupiaoDetail:function(t){var i=this;this.$u.api.getGupiaoDetail({id:t}).then((function(t){t.price=parseFloat(t.price),t.close=parseFloat(t.close),t.low=parseFloat(t.low),t.open=parseFloat(t.open),t.high=parseFloat(t.high),console.log(t),i.gupiao=t,i.nowgupiao=t.price}))},change_interval:function(t){switch(this.current=t,t){case 0:this.interval="d";break;case 1:this.interval="5";break;case 2:this.interval="15";break;case 3:this.interval="30";break;case 4:this.interval="60";break}},sectionChange:function(t){this.curNow=t,1==t?(this.show_nowprice=!1,this.buytype_data=0):(this.show_nowprice=!0,this.buytype_data=1,this.nowzhishu=this.zhishu.price)},sectionChange2:function(t){this.curNow2=t,this.fangxiang=1==t?"kong":"duo"},addOrder:function(){var t=this;this.$u.api.buyGupiao({fangxiang:this.fangxiang,type:0,pro_id:this.id,buytype:this.buytype_data,price:this.nowgupiao,shuliang:this.zhangshu}).then((function(i){console.log(i),t.$refs.uToast.show({title:i.msg,type:"success"})}))},open_buy_modal:function(){this.show_buy_modal=!0},addZixuan:function(){var t=this,i=this;this.$u.api.addZixuan({id:this.id}).then((function(e){console.log(e),"addsuccess"==e.action?t.zixuan_status="star-fill":t.zixuan_status="star",i.$refs.uToast.show({title:e.msg,type:"success"})}))},isZixuan:function(){var t=this;this.$u.api.isZixuan({id:this.id}).then((function(i){console.log(i.msg),"yes"==i.msg?t.zixuan_status="star-fill":t.zixuan_status="star"}))},getpankou:function(){var t=this;this.$u.api.getpankou({id:this.id}).then((function(i){console.log("pankou",i),t.pankou=i}))}}};i.default=n},"291c":function(t,i,e){"use strict";var n=e("b760"),a=e.n(n);a.a},"2f437":function(t,i,e){"use strict";var n=e("cc52"),a=e.n(n);a.a},"370b":function(t,i,e){"use strict";e.r(i);var n=e("0449"),a=e("90e4");for(var s in a)"default"!==s&&function(t){e.d(i,t,(function(){return a[t]}))}(s);e("291c");var u,o=e("f0c5"),l=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"c7c48cc8",null,!1,n["a"],u);i["default"]=l.exports},"3a02":function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,".container[data-v-29c20830]{margin:0 %?30?%;width:%?690?%;padding:0 0 %?50?%}.hd[data-v-29c20830]{background-color:#de3639;color:#fff}.hd .zixuan[data-v-29c20830]{position:absolute;right:%?30?%;top:%?30?%;padding:%?20?% %?30?%;border-radius:%?20?%;background:#f90}.pankou .item[data-v-29c20830]{margin:%?15?% 0}",""]),t.exports=i},"5aaa":function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */.u-line[data-v-c7c48cc8]{vertical-align:middle}',""]),t.exports=i},"90e4":function(t,i,e){"use strict";e.r(i);var n=e("9326"),a=e.n(n);for(var s in n)"default"!==s&&function(t){e.d(i,t,(function(){return n[t]}))}(s);i["default"]=a.a},9326:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n={name:"u-line",props:{color:{type:String,default:"#e4e7ed"},length:{type:String,default:"100%"},direction:{type:String,default:"row"},hairLine:{type:Boolean,default:!0},margin:{type:String,default:"0"},borderStyle:{type:String,default:"solid"}},computed:{lineStyle:function(){var t={};return t.margin=this.margin,"row"==this.direction?(t.borderBottomWidth="1px",t.borderBottomStyle=this.borderStyle,t.width=this.$u.addUnit(this.length),this.hairLine&&(t.transform="scaleY(0.5)")):(t.borderLeftWidth="1px",t.borderLeftStyle=this.borderStyle,t.height=this.$u.addUnit(this.length),this.hairLine&&(t.transform="scaleX(0.5)")),t.borderColor=this.color,t}}};i.default=n},b760:function(t,i,e){var n=e("5aaa");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("70121b45",n,!0,{sourceMap:!1,shadowMode:!1})},cc52:function(t,i,e){var n=e("3a02");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("0aacd55b",n,!0,{sourceMap:!1,shadowMode:!1})}}]);