(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesA-zhishu-detail"],{"081d":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return s}));var s={uNavbar:i("7857").default,uTabs:i("37fe").default,qiunDataCharts:i("a5cb").default,uSubsection:i("cc40").default,uGap:i("4b74").default,uNumberBox:i("fc3b").default,uButton:i("b2fb").default,uToast:i("6660").default,uModal:i("ebf7").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"wrap"},[i("u-navbar",{attrs:{title:t.zhishu.name}}),i("v-uni-view",{staticClass:"hd u-padding-30"},[i("v-uni-view",{staticClass:"u-font-40"},[t._v(t._s(t.zhishu.name))]),i("v-uni-view",{staticClass:"u-flex"},[i("v-uni-view",{staticClass:"u-flex-1 u-font-36"},[t._v(t._s(t.zhishu.price))]),i("v-uni-view",{staticClass:"u-flex-1"},[i("v-uni-view",[t.zhishu.zhangdieshu>0?i("v-uni-text",[t._v("+")]):t._e(),t._v(t._s(t.zhishu.zhangdieshu))],1),i("v-uni-view",[t.zhishu.zhangdiebaifenbi>0?i("v-uni-text",[t._v("+")]):t._e(),t._v(t._s(t.zhishu.zhangdiebaifenbi)+"%")],1)],1)],1),i("v-uni-view",{staticClass:"u-flex"},[i("v-uni-view",{staticClass:"u-flex-1"},[t._v("今開價:"+t._s(t.zhishu.open))]),i("v-uni-view",{staticClass:"u-flex-1"},[t._v("昨收價:"+t._s(t.zhishu.close))])],1),i("v-uni-view",{staticClass:"u-flex"},[i("v-uni-view",{staticClass:"u-flex-1"},[t._v("最高價:"+t._s(t.zhishu.high))]),i("v-uni-view",{staticClass:"u-flex-1"},[t._v("最低價:"+t._s(t.zhishu.low))])],1)],1),i("v-uni-view",{staticClass:"content"},[i("u-tabs",{attrs:{list:t.list,"is-scroll":!1,current:t.current,"active-color":"#f00"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change_interval.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"charts-box",staticStyle:{height:"600rpx"}},[i("qiun-data-charts",{attrs:{type:"candle",opts:{extra:{tooltip:{showCategory:!0}},xAxis:{scrollAlign:"right",disabled:!0}},ontouch:!0,canvas2d:!0,onzoom:!0,canvasId:"klineid",chartData:t.chartsDataCandle1}})],1)],1),i("v-uni-view",{staticClass:"container"},[i("u-subsection",{attrs:{list:t.price_type,current:t.curNow,"active-color":"#fff","button-color":"#2979ff"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.sectionChange.apply(void 0,arguments)}}}),i("u-gap",{attrs:{height:"30"}}),i("v-uni-view",{staticClass:"u-flex u-row-center"},[t.show_nowprice?i("u-number-box",{attrs:{"positive-integer":!1,step:.1,"input-width":"560","input-height":"70"},model:{value:t.nowzhishu,callback:function(e){t.nowzhishu=e},expression:"nowzhishu"}}):t._e()],1),i("u-gap",{attrs:{height:"30"}}),i("v-uni-view",[t._v("數量（張）")]),i("v-uni-view",{staticClass:"u-flex u-row-center"},[i("u-number-box",{attrs:{"positive-integer":!1,"input-width":"560","input-height":"70"},model:{value:t.zhangshu,callback:function(e){t.zhangshu=e},expression:"zhangshu"}})],1),i("u-gap",{attrs:{height:"30"}}),i("u-subsection",{attrs:{list:t.buy_type,current:t.curNow2,"active-color":"#fff","button-color":"#f00"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.sectionChange2.apply(void 0,arguments)}}}),i("u-gap",{attrs:{height:"30"}}),i("u-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.open_buy_modal.apply(void 0,arguments)}}},[t._v("買入")])],1),i("u-toast",{ref:"uToast"}),i("u-modal",{attrs:{content:"確定買入嗎？","confirm-text":"確定","show-cancel-button":!0},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.addOrder.apply(void 0,arguments)}},model:{value:t.show_buy_modal,callback:function(e){t.show_buy_modal=e},expression:"show_buy_modal"}})],1)},n=[]},"2e76":function(t,e,i){"use strict";i.r(e);var s=i("61b5"),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,(function(){return s[t]}))}(n);e["default"]=a.a},"61b5":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={data:function(){return{zhishu:{name:"",price:0,zhangdieshu:0,zhangdiebaifenbi:0,open:0,close:0,high:0,low:0},id:0,interval:"d",chartsDataCandle1:{categories:[],series:[{name:"",data:[]}]},colorList:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],labelFont:"bold 12px Sans-serif",list:[{name:"日K"},{name:"5分"},{name:"10分"},{name:"30分"},{name:"60分"}],current:0,price_type:[{name:"限價"},{name:"市價"}],curNow:0,buy_type:[{name:"買多"},{name:"買空"}],curNow2:0,nowzhishu:0,show_nowprice:!0,zhangshu:1,fangxiang:"duo",buytype_data:1,show_buy_modal:!1,ZhishusocketTask:null,timer1:null,GetKsocketTask:null,timer2:null}},onLoad:function(t){var e=this;this.id=t.id,this.getZhishuDetail(this.id),this.$u.api.getZhishuKline({id:this.id,interval:this.interval}).then((function(t){e.chartsDataCandle1=t}))},onShow:function(){var t=this;this.ZhishusocketTask=uni.connectSocket({url:getApp().globalData.socket_domain+":2001",success:function(){console.log("socket success")},fail:function(){console.log("socket fail")}}),this.ZhishusocketTask.onMessage((function(e){e=JSON.parse(e.data),console.log(e),t.zhishu=e})),this.timer1=setInterval((function(){t.ZhishusocketTask.send({data:"getzhishu_"+t.id,success:function(){},fail:function(){}})}),5e3),this.GetKsocketTask=uni.connectSocket({url:getApp().globalData.socket_domain+":2003",success:function(){console.log("socket success")},fail:function(){console.log("socket fail")}}),this.GetKsocketTask.onMessage((function(e){e=JSON.parse(e.data),t.chartsDataCandle1=e})),this.GetKsocketTask.onClose((function(){console.log("关闭GetKsocketTask")})),this.GetKsocketTask.send({data:"getzhishuk_"+t.id+"_d",success:function(){},fail:function(){}}),this.timer2=setInterval((function(){t.GetKsocketTask.send({data:"getzhishuk_"+t.id+"_"+t.interval,success:function(){},fail:function(){}})}),3e3)},onUnload:function(){this.ZhishusocketTask.close(),this.ZhishusocketTask=null,this.GetKsocketTask.close(),this.GetKsocketTask=null,clearInterval(this.timer1),clearInterval(this.timer2),this.timer1=null,this.timer2=null},onHide:function(){this.ZhishusocketTask.close(),this.ZhishusocketTask=null,this.GetKsocketTask.close(),this.GetKsocketTask=null,clearInterval(this.timer1),clearInterval(this.timer2),this.timer1=null,this.timer2=null},methods:{getZhishuDetail:function(t){var e=this;this.$u.api.getZhishuDetail({id:t}).then((function(t){e.zhishu=t,e.nowzhishu=t.price}))},change_interval:function(t){switch(this.current=t,t){case 0:this.interval="d";break;case 1:this.interval="5";break;case 2:this.interval="10";break;case 3:this.interval="30";break;case 4:this.interval="60";break}},sectionChange:function(t){this.curNow=t,1==t?(this.show_nowprice=!1,this.buytype_data=0):(this.show_nowprice=!0,this.buytype_data=1,this.nowzhishu=this.zhishu.price)},sectionChange2:function(t){this.curNow2=t,this.fangxiang=1==t?"kong":"duo"},addOrder:function(){var t=this,e=uni.getStorageSync("userId");this.$u.api.addOrder({fangxiang:this.fangxiang,user_id:e,type:0,pro_id:this.id,buytype:this.buytype_data,price:this.nowzhishu,shuliang:this.zhangshu}).then((function(e){console.log(e),t.$refs.uToast.show({title:e.msg,type:"success"})}))},open_buy_modal:function(){this.show_buy_modal=!0}}};e.default=s},"86ab":function(t,e,i){"use strict";var s=i("93d7"),a=i.n(s);a.a},"93d7":function(t,e,i){var s=i("c8e6");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var a=i("4f06").default;a("67b85e30",s,!0,{sourceMap:!1,shadowMode:!1})},ac81:function(t,e,i){"use strict";i.r(e);var s=i("081d"),a=i("2e76");for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);i("86ab");var u,o=i("f0c5"),c=Object(o["a"])(a["default"],s["b"],s["c"],!1,null,"25e9d938",null,!1,s["a"],u);e["default"]=c.exports},c8e6:function(t,e,i){var s=i("24fb");e=s(!1),e.push([t.i,".container[data-v-25e9d938]{margin:0 %?30?%;padding:0 0 %?50?%}.hd[data-v-25e9d938]{background-color:#de3639;color:#fff}",""]),t.exports=e}}]);