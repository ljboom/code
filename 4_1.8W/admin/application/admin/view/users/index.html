{extend name="layout"}

{block name="content"}
    <!-- wrapper-content -->
	<div class="wrapper wrapper-content animated fadeInRight">
		<div class="row">
			<div class="col-lg-12">

				<div class="ibox-content m-b-sm border-bottom">
					<div class="p-xs">
						<div class="float-left m-r-md">
							<i class="fa fa-user text-navy mid-icon"></i>
						</div>
						<h2>会员列表</h2>
						<span>可以操作会员的所有信息</span>
					</div>
				</div>

				<div class="ibox ">
					<div class="ibox-title">
						<h5>系统用户管理 </h5>
					</div>
					<div class="ibox-content">
						<div class="row m-b">
							<div class="col-sm-12">
								<form method="get" action="" id="form">
									<div class="search-bar row">

										<div class="input-group col-sm-5">
											<div class="input-group-prepend">
												<button data-toggle="dropdown" class="btn btn-white dropdown-toggle" type="button" aria-expanded="false">
												{switch :input('get.status')}
													{case 1}使用中{/case}
													{case 2}已禁用{/case}
													{default}全部状态
												{/switch}
												</button>
												<input type="hidden" name="status" value="{:input('get.status')}" />
												<ul class="dropdown-menu" x-placement="bottom-start"
													style="position: absolute; top: 35px; left: 0px; will-change: top, left;">
													<li>
														<a class="search-dropdown" data-value="0"
															href="javascript:void(0)" data-name="status">全部状态</a>
													</li>
													<li>
														<a class="search-dropdown" data-value="1"
															href="javascript:void(0)" data-name="status">使用中</a>
													</li>
													<li>
														<a class="search-dropdown" data-value="2"
															href="javascript:void(0)" data-name="status">已禁用</a>
													</li>
												</ul>
											</div>
											

											<div class="input-group-prepend">
												<button data-toggle="dropdown" class="btn btn-white dropdown-toggle" type="button" aria-expanded="false">
													{switch :input('get.type')}
													{case 1}ID{/case}
													{case 2}用户名{/case}
													{case 3}昵称{/case}
													{case 4}邮箱{/case}
													{default}不限
													{/switch}
												</button>
												<input type="hidden" name="type" value="{:input('get.type')}" />
												<ul class="dropdown-menu" x-placement="bottom-start"
													style="position: absolute; top: 35px; left: 0px; will-change: top, left;">
													<li>
														<a class="search-dropdown" data-name="type" data-value="0"
															href="javascript:void(0)">不限</a>
													</li>
													<li>
														<a class="search-dropdown" data-name="type" data-value="1"
															href="javascript:void(0)">ID</a>
													</li>
													<li>
														<a class="search-dropdown" data-name="type" data-value="2"
															href="javascript:void(0)">用户名</a>
													</li>
													<!--<li>-->
													<!--	<a class="search-dropdown" data-name="type" data-value="3"-->
													<!--		href="javascript:void(0)">昵称</a>-->
													<!--</li>-->
													<!--<li>-->
													<!--	<a class="search-dropdown" data-name="type" data-value="4"-->
													<!--		href="javascript:void(0)">邮箱</a>-->
													<!--</li>-->
												</ul>
											</div>
											<input type="text" name="keyword" class="form-control" value="{:input('get.keyword')}">
										</div>

										<div class="input-group input-daterange col-sm-5">
											<input id="data_start" name="data_start" type="text" placeholder="创建日期(起)" data-date-format="yyyy-mm-dd"
												class="form-control" value="{:input('get.data_start')}" />
											<div class="input-group-addon"> ~ </div>
											<input id="data_end" name="data_end" type="text" placeholder="创建日期(止)" data-date-format="yyyy-mm-dd"
												class="form-control" value="{:input('get.data_end')}" />
										</div>

										<button class="btn btn-primary ml-3" type="submit"><i class="fa fa-search"></i>
											搜索</button>

									</div>
								</form>

							</div>
						</div>

						<div class="row m-b">
							<div class="col-sm-12">
								<div class="toolbar-btn-action">
									<a href="javascript:;" class="btn btn-primary btn-refresh page-reload" title="刷新"><i
											class="fa fa-refresh"></i> </a>
									<a title="添加" class="btn btn-success" href="{:url('admin/users/useradd')}"><i
											class="fa fa-plus-circle"></i> 添加</a>
									<a title="启用" class="btn btn-success ajax-post confirm" target-form="ids"
										href="{:url('admin/users/editStatus?type=1')}"><i
											class="fa fa-check-circle-o"></i> 启用</a>
									<a title="禁用" class="btn btn-warning ajax-post confirm" target-form="ids"
										href="{:url('admin/users/editStatus?type=2')}"><i
											class="fa fa-ban"></i> 禁用</a>
									<a title="删除" class="btn btn-danger ajax-post confirm" target-form="ids"
										href="{:url('admin/users/deletes')}"><i
											class="fa fa-times-circle-o"></i> 删除</a>
								</div>
							</div>
						</div>

						<div class="table-responsive">
							<table class="table table-bordered table-hover">
								<thead>
									<tr>
										<th><input type="checkbox" class="i-checks checkbox-master"> </th>
										<th>ID </th>
										<!--<th>名称 </th>-->
										<th>手机号 </th>
										<th>余额</th>
										<th>注册时间</th>
										<th>最近登录时间</th>
										<th>状态</th>
										<th>操作</th>
									</tr>
								</thead>
								<tbody>
								    
							    {foreach($list as $v)}
							        <tr>
							            <td class="align-middle">{if $v.id!=1}<input type="checkbox" class="i-checks ids" name="ids[]" value="{$v.id}">{/if}</td>
							            	<td class="align-middle">{$v.id}</td>
							            
							            	<!--<td class="align-middle">{$v.username}</td>-->
							            	<td class="align-middle">{$v.mobile}</td>
							            	<td class="align-middle">{$v.money}</td>
							            	<td class="align-middle"><?php echo date('Y-m-d H:i:s',$v['createtime'])?></td>
							            	<td class="align-middle">{if($v['logintime'] < 1000)}暂未登录{else}<?php echo date('Y-m-d H:i:s',$v['logintime']);?>{/if}</td>
							            	<td class="align-middle">
							            	    
							            	    {if $v.status==1}
													<b class="text-success">使用中</b>
												{else}
													<b class="text-warning">禁用中</b>
												{/if}
												
							            	</td>
							            	<td class="align-middle">
							            	    
							            	    	<a href="{:url('admin/users/useredit?id='.$v.id)}" class="btn btn-primary btn-xs"
												_tag="edit" data-toggle="tooltip" data-placement="top" title="修改"><i
													class="fa fa-pencil"></i></a>
													{if $v.status==1}
												<a href="{:url('admin/users/editStatus?id='.$v.id.'&type=2')}"
													class="btn btn-warning btn-xs ajax-get confirm" _tag="disable"
													data-toggle="tooltip" data-placement="top" title="禁用"><i class="fa fa-close"></i></a>
												{else /}
												<a href="{:url('admin/users/editStatus?id='.$v.id.'&type=1')}" class="btn btn-success btn-xs ajax-get confirm"
													_tag="enable" data-toggle="tooltip" data-placement="top" title="启用"><i class="fa fa-check"></i></a>
												{/if}
												
													<a href="{:url('admin/users/deletes?id='.$v.id)}"
												class="btn btn-danger btn-xs ajax-get confirm" _tag="delete"
												data-toggle="tooltip" data-placement="top" title="删除"><i
													class="fa fa-trash"></i></a>
													
												<a href="{:url('admin/users/userData?id='.$v.id)}" class="btn btn-primary btn-xs"
												_tag="edit" data-toggle="tooltip" data-placement="top" title="查看用户信息">查看信息</a>	
							            	</td>
							        </tr>
							    {/foreach}
									
								</tbody>
							</table>

							<!-- The Gallery as lightbox dialog, should be a child element of the document body -->
							<div id="blueimp-gallery" class="blueimp-gallery">
								<div class="slides"></div>
								<h3 class="title"></h3>
								<a class="prev">‹</a>
								<a class="next">›</a>
								<a class="close">×</a>
								<a class="play-pause"></a>
								<ol class="indicator"></ol>
							</div>

							{$page|raw}

						</div>

					</div>
				</div>

			</div>
		</div>

	</div>

{/block}
