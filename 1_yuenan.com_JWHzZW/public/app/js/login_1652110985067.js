(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"00b4":function(e,t,o){"use strict";o("ac1f");var s=o("23e7"),i=o("da84"),r=o("c65b"),n=o("e330"),a=o("1626"),l=o("861d"),c=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),f=i.Error,d=n(/./.test);s({target:"RegExp",proto:!0,forced:!c},{test:function(e){var t=this.exec;if(!a(t))return d(this,e);var o=r(t,this,e);if(null!==o&&!l(o))throw new f("RegExp exec method returned something other than an Object or null");return!!o}})},8319:function(e,t,o){"use strict";o("b24a")},"9d64":function(e,t,o){e.exports=o.p+"app/img/logo.png"},a03f:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",["登錄"===e.loginType?o("navBar",{attrs:{navTitle:e.loginType,showRight:"",showLeft:!0}}):o("navBar",{attrs:{navTitle:e.loginType,leftBack:!1},on:{fnBtnLeft:e.fnBtnLeft}}),o("div",{staticClass:"full-width"},[o("van-image",{staticClass:"login-header",attrs:{src:e.logoUrl}}),o("van-form",{directives:[{name:"show",rawName:"v-show",value:"登錄"===e.loginType,expression:"loginType === '登錄' "}],ref:"refFormLogin",staticClass:"public-form"},[o("div",[o("div",[o("i",{staticClass:"iconfont icon-shouji color-theme"}),o("span",[e._v("手機號")])]),o("van-field",{attrs:{clearable:"",placeholder:"請輸入手機號碼",rules:[{required:!0,message:"請輸入手機號碼"}]},model:{value:e.formLogin.tel,callback:function(t){e.$set(e.formLogin,"tel","string"===typeof t?t.trim():t)},expression:"formLogin.tel"}})],1),o("div",[o("div",[o("i",{staticClass:"iconfont icon-mima1 color-theme"}),o("span",[e._v("密碼")])]),o("van-field",{attrs:{clearable:"",type:"password",placeholder:"請輸入密碼",rules:[{required:!0,message:"請輸入密碼"}]},model:{value:e.formLogin.password,callback:function(t){e.$set(e.formLogin,"password","string"===typeof t?t.trim():t)},expression:"formLogin.password"}})],1),o("van-button",{directives:[{name:"btn-re-click",rawName:"v-btn-re-click"}],staticClass:"btn-login",attrs:{block:"",type:"info","native-type":"submit"},on:{click:e.fnLogin}},[e._v("登錄")]),o("van-button",{staticClass:"btn-text",attrs:{block:"",type:"text","native-type":"button"},on:{click:e.fnGoRegister}},[e._v("立即註冊")])],1),o("van-form",{directives:[{name:"show",rawName:"v-show",value:"註冊"===e.loginType,expression:"loginType === '註冊' "}],ref:"refFormRegister",staticClass:"public-form"},[o("div",[o("div",[o("i",{staticClass:"iconfont icon-shouji color-theme"}),o("span",[e._v("手機號")])]),o("van-field",{attrs:{clearable:"",placeholder:"請輸入手機號碼",autocomplete:"off",rules:[{required:!0,message:"請輸入手機號碼"},{validator:e.taiwanPass,message:"請確認手機格式是否正確！"}]},model:{value:e.formRegister.tel,callback:function(t){e.$set(e.formRegister,"tel","string"===typeof t?t.trim():t)},expression:"formRegister.tel"}})],1),o("div",[o("div",[o("i",{staticClass:"iconfont icon-mima1 color-theme"}),o("span",[e._v("密碼")])]),o("van-field",{attrs:{clearable:"",type:"password",placeholder:"請輸入密碼",rules:[{required:!0,message:"請輸入密碼"}]},model:{value:e.formRegister.password,callback:function(t){e.$set(e.formRegister,"password","string"===typeof t?t.trim():t)},expression:"formRegister.password"}})],1),o("div",[o("div",[o("i",{staticClass:"iconfont icon-mima1 color-theme"}),o("span",[e._v("確認密碼")])]),o("van-field",{attrs:{clearable:"",type:"password",placeholder:"請確認密碼",rules:[{required:!0,message:"請確認密碼"},{validator:e.checkPass,message:"兩次輸入密碼不一致"}]},model:{value:e.formRegister.sure_password,callback:function(t){e.$set(e.formRegister,"sure_password","string"===typeof t?t.trim():t)},expression:"formRegister.sure_password"}})],1),o("div",[o("div",[o("i",{staticClass:"iconfont icon-yaoqingma color-theme"}),o("span",[e._v("邀請碼")])]),o("van-field",{attrs:{clearable:"",placeholder:"請輸入邀請碼"},model:{value:e.formRegister.code_str,callback:function(t){e.$set(e.formRegister,"code_str","string"===typeof t?t.trim():t)},expression:"formRegister.code_str"}})],1),o("van-button",{directives:[{name:"btn-re-click",rawName:"v-btn-re-click"}],staticClass:"btn-login",attrs:{block:"",type:"info","native-type":"submit"},on:{click:e.fnRegisterMember}},[e._v("註冊")])],1)],1)],1)},i=[],r=(o("ac1f"),o("00b4"),o("a474")),n=o("9d64"),a=o.n(n),l={name:"login",data:function(){return{logoUrl:a.a,loginType:"登錄",formLogin:{tel:"",password:""},formRegister:{tel:"",password:"",sure_password:"",code_str:""}}},methods:{checkPass:function(e){return console.log(e),e===this.formRegister.password},taiwanPass:function(e){return console.log(e),console.log(/^(09\d{8})$/.test(e)),/^(09\d{8})$/.test(e)},fnFormResetValidation:function(){this.$refs["refFormRegister"].resetValidation(),this.$refs["refFormLogin"].resetValidation()},fnLogin:function(){var e=this;this.$refs.refFormLogin.validate().then((function(){Object(r["n"])({tel:e.formLogin.tel,password:e.formLogin.password}).then((function(t){200==t.code&&(e.$toast(t.msg||"登錄成功！"),e.fnFormResetValidation(),localStorage.setItem("userId",t.data.id),localStorage.setItem("tel",e.formLogin.tel),setTimeout((function(){e.$router.push({path:"/index"})}),1500))}))})).catch((function(e){}))},fnGoRegister:function(){Object.assign(this.$data.formLogin,this.$options.data().formLogin),this.loginType="註冊",this.fnFormResetValidation()},fnRegisterMember:function(){var e=this;this.$refs.refFormRegister.validate().then((function(){Object(r["M"])({tel:e.formRegister.tel,password:e.formRegister.password,code_str:e.formRegister.code_str}).then((function(t){200==t.code&&(e.$toast(t.msg||"註冊成功！"),setTimeout((function(){e.loginType="登錄",Object.assign(e.$data.formRegister,e.$options.data().formRegister),e.fnFormResetValidation()}),500))}))})).catch((function(e){}))},fnBtnLeft:function(){Object.assign(this.$data.formRegister,this.$options.data().formRegister),this.loginType="登錄",this.fnFormResetValidation()}},created:function(){}},c=l,f=(o("8319"),o("2877")),d=Object(f["a"])(c,s,i,!1,null,"340a311e",null);t["default"]=d.exports},b24a:function(e,t,o){}}]);