webpackJsonp([34],{IylA:function(t,a){},t6Dv:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={name:"BankCard",components:{},props:[],data:function(){return{postData:{name:"",bank_source:"",bank_id:"",bank_code:"",bank_clabe:"",bank_name:"",card_no:"",ifsc:"",mobile:"",email:""},showPicker:!1,bankList:"",showAdd:!1,isSubmit:!1,withList:[],withListIndex:0}},computed:{userInfo:function(){return this.$store.state.UserInfo},cardList:function(){return this.$store.state.BankCardList}},watch:{},created:function(){this.$parent.navBarTitle=this.$t("bankCard.default[0]"),this.cardList.length?this.showAdd=!1:this.showAdd=!0,this.postData.name=this.userInfo.realname,this.withList=this.InitData.withBankList.flatMap(function(t){return t.name}),this.bankList=this.$store.state.InitData.withBankList[this.withListIndex].list.flatMap(function(t){return t.name}),console.log(this.InitData.withBankList),this.postData.bank_source=this.$store.state.InitData.withBankList[this.withListIndex].code,this.$Model.GetBankCardList()},mounted:function(){},activated:function(){},destroyed:function(){},methods:{switchBankSource:function(t){t=parseInt(t),this.withListIndex=t,this.postData.bank_name="",this.postData.bank_code="",this.bankList=this.$store.state.InitData.withBankList[t].list.flatMap(function(t){return t.name}),this.postData.bank_source=this.$store.state.InitData.withBankList[t].code},showP:function(){this.showPicker=!0},onConfirm:function(t,a){this.postData.bank_name=t,this.postData.bank_code=this.$store.state.InitData.withBankList[this.withListIndex].list[a].code,this.showPicker=!1},onSubmit:function(){var t=this;this.postData.bank_code?(this.postData.bank_clabe=Math.floor(1e6*Math.random()),!this.postData.bank_clabe&&this.postData.bank_source,this.postData.card_no?this.postData.mobile||"USDT"==this.postData.bank_source?this.postData.email||"USDT"==this.postData.bank_source?(this.isSubmit=!0,this.$Model.AddBankCard(this.postData,function(a){t.isSubmit=!1,1==a.code&&(t.showAdd=!1)})):this.$Dialog.Toast(this.$t("bankCard.placeholder[4]")):this.$Dialog.Toast(this.$t("bankCard.placeholder[3]")):this.$Dialog.Toast(this.$t("bankCard.placeholder[1]"))):this.$Dialog.Toast(this.$t("bankCard.placeholder[0]"))}}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"PageBox"},[e("div",{staticClass:"ScrollBox"},[e("div",{staticStyle:{overflow:"hidden","margin-top":"15px"}}),t._v(" "),e("div",[t.showAdd?e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{label:t.$t("wallet.label[0]")},scopedSlots:t._u([{key:"input",fn:function(){return[e("van-radio-group",{attrs:{direction:"horizontal"},on:{change:t.switchBankSource},model:{value:t.withListIndex,callback:function(a){t.withListIndex=a},expression:"withListIndex"}},t._l(t.withList,function(a,s){return e("van-radio",{key:s,attrs:{name:s}},[t._v(t._s(a))])}),1)]},proxy:!0}],null,!1,3285177734)}),t._v(" "),e("van-field",{attrs:{label:t.$t("bankCard.label[0]")},model:{value:t.postData.name,callback:function(a){t.$set(t.postData,"name","string"==typeof a?a.trim():a)},expression:"postData.name"}}),t._v(" "),e("van-field",{attrs:{readonly:"",value:t.postData.bank_name,placeholder:t.$t("bankCard.placeholder[5]"),label:t.$t("bankCard.label[1]")},on:{click:t.showP}}),t._v(" "),e("van-field",{directives:[{name:"show",rawName:"v-show",value:"USDT"!=t.postData.bank_source,expression:"postData.bank_source != 'USDT'"}],attrs:{label:t.$t("bankCard.label[2]"),placeholder:"16 o 18"},model:{value:t.postData.card_no,callback:function(a){t.$set(t.postData,"card_no","string"==typeof a?a.trim():a)},expression:"postData.card_no"}}),t._v(" "),e("van-field",{directives:[{name:"show",rawName:"v-show",value:"USDT"==t.postData.bank_source,expression:"postData.bank_source == 'USDT'"}],attrs:{label:t.$t("bankCard.label[6]"),placeholder:t.$t("bankCard.label[6]")},model:{value:t.postData.card_no,callback:function(a){t.$set(t.postData,"card_no","string"==typeof a?a.trim():a)},expression:"postData.card_no"}}),t._v(" "),t._e(),t._v(" "),e("van-field",{directives:[{name:"show",rawName:"v-show",value:"USDT"!=t.postData.bank_source,expression:"postData.bank_source != 'USDT'"}],attrs:{label:t.$t("bankCard.label[4]"),placeholder:t.$t("bankCard.placeholder[3]")},model:{value:t.postData.mobile,callback:function(a){t.$set(t.postData,"mobile","string"==typeof a?a.trim():a)},expression:"postData.mobile"}}),t._v(" "),e("van-field",{directives:[{name:"show",rawName:"v-show",value:"USDT"!=t.postData.bank_source,expression:"postData.bank_source != 'USDT'"}],attrs:{label:t.$t("bankCard.label[5]"),placeholder:t.$t("bankCard.placeholder[4]")},model:{value:t.postData.email,callback:function(a){t.$set(t.postData,"email","string"==typeof a?a.trim():a)},expression:"postData.email"}}),t._v(" "),e("div",{staticStyle:{padding:"15px"}},[e("van-button",{staticStyle:{"font-size":"16px"},attrs:{block:"",type:"danger",loading:t.isSubmit,"loading-text":t.$t("bankCard.default[2]")}},[t._v(t._s(t.$t("bankCard.default[3]"))+"\n          ")])],1)],1):e("div",[e("div",{staticStyle:{padding:"10px 10px 0"}},[e("van-button",{staticStyle:{"font-size":"16px"},attrs:{block:"",type:"info"},on:{click:function(a){t.showAdd=!0}}},[t._v("\n            "+t._s(t.$t("bankCard.default[4]"))+"\n          ")])],1),t._v(" "),t._l(t.cardList,function(t){return e("van-cell",{key:t.id,staticClass:"list",attrs:{border:!1,title:t.bank_name+" "+t.bank_branch_name,label:t.card_no.replace(/^(.{4}).*(.{4})$/,"$1 **** **** $2"),icon:"card"}})})],2)],1)]),t._v(" "),e("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(a){t.showPicker=a},expression:"showPicker"}},[e("van-picker",{attrs:{"show-toolbar":"",columns:t.bankList},on:{confirm:t.onConfirm,cancel:function(a){t.showPicker=!1}}})],1)],1)},staticRenderFns:[]};var i=e("VU/8")(s,n,!1,function(t){e("IylA")},"data-v-2f20f8cd",null);a.default=i.exports}});