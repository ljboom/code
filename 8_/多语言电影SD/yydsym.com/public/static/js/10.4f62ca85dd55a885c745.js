webpackJsonp([10],{j6Qc:function(t,s,a){"use strict";(function(t){var i=a("7+uW");s.a={setup:function(){var t=Object(i.ref)(0);Object(i.computed)(function(){return t.value.toFixed(0)+"%"})},name:"TaskRecord",components:{},props:["taskState"],data:function(){return{currentRate:0,listData:"",isLoad:!1,isFinished:!1,isRefresh:!1,pageNo:1,tabsState:1,tabsIndex:0,taskTabs:[{state:1,text:this.$t("task.tabs[0]")},{state:2,text:this.$t("task.tabs[1]")},{state:3,text:this.$t("task.tabs[2]")},{state:6,text:this.$t("task.tabs[5]")}],fileList:[],listInfo:{}}},computed:{jindu:function(){var t=this.listInfo.today_ok_task/this.listInfo.today_max_task;return console.log,100*Number(t.toFixed(3))||0}},watch:{},created:function(){this.listData=this.taskTabs.flatMap(function(t){return[""]}),this.getListData("init")},mounted:function(){},activated:function(){},destroyed:function(){},methods:{onClickCell:function(s,a){t(event.target).hasClass("van-uploader__input")||this.$router.push("/user/taskInfo/"+s+"?icon="+a)},onLoad:function(){this.getListData("load")},changeTabs:function(t){this.tabsState=this.taskTabs[t].state,this.getListData("init")},getListData:function(t){var s=this;this.isLoad=!0,this.isRefresh=!1,"load"==t?this.pageNo+=1:(this.pageNo=1,this.isFinished=!1),this.$Model.GetTaskRecord({status:this.tabsState,page_no:this.pageNo,is_u:2},function(a){s.isLoad=!1,1==a.code?(s.listData[s.tabsIndex]="load"==t?s.listData[s.tabsIndex].concat(a.info):a.info,s.pageNo==a.data_total_page?s.isFinished=!0:s.isFinished=!1):(s.listData[s.tabsIndex]="",s.isFinished=!0),s.listInfo=a})},onRefresh:function(){this.getListData("init")},afterRead:function(t){this.InitData.setting.demo_img?(t.message=this.$t("upload[2]"),t.status="success",t.url=this.InitData.setting.up_url+this.InitData.setting.demo_img):(t.status="uploading",t.message=this.$t("upload[0]"),this.uploadImgs(t))},compressImg:function(t){var s=this;this.$Util.CompressImg(t.file.type,t.content,750,function(a){var i=new FormData;i.append("token",localStorage.Token),i.append("type",3),i.append("image",a,t.file.name),s.$Model.UploadImg(i,function(a){1==a.code?(t.message=s.$t("upload[2]"),t.status="success",t.url=a.url):(t.status="failed",t.message=s.$t("upload[3]"))})})},uploadImgs:function(t){var s=this;if(t.length)t.forEach(function(t){if(!t.file.type.match(/image/))return t.status="failed",void(t.message=s.$t("upload[1]"));s.compressImg(t)});else{if(!t.file.type.match(/image/))return t.status="failed",void(t.message=this.$t("upload[1]"));this.compressImg(t)}},submitTask:function(t,s){var a=this;if(this.fileList[s]){var i=this.fileList[s].flatMap(function(t){return t.url});this.$Model.SubmitTask({order_id:t,examine_demo:i},function(t){1==t.code&&(a.fileList[s]=[],a.getListData("init"))})}else this.$Dialog.Toast(this.$t("task.msg"))},cancelTask:function(t,s){var a=this;this.$Model.SubmitTask({order_id:t,status:6},function(t){1==t.code&&(a.fileList[s]=[],a.getListData("init"))})}}}}).call(s,a("7t+N"))},pvr9:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=a("j6Qc"),e={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"Site IndexBox"},[a("van-nav-bar",{attrs:{fixed:"",border:!1,title:t.$t("footer[1]"),"left-arrow":""},on:{"click-left":function(s){return t.$router.go(-1)}}}),t._v(" "),a("div",{staticClass:"ScrollBox",staticStyle:{"padding-top":"3rem"}},[a("div",{staticClass:"top-status"},[a("div",[a("div",{staticClass:"over"},[a("img",{attrs:{src:"./static/newicon/wei.png"}})]),t._v(" "),a("div",{staticStyle:{"margin-top":".3rem"}},[t._v(t._s(t.$t("task.progress[0]"))+"("+t._s(t.listInfo.today_max_task-t.listInfo.today_ok_task||"0")+")")])]),t._v(" "),a("div",[a("div",[a("van-circle",{attrs:{color:"#79c52e","layer-color":"#CCCCCC",size:"60px",rate:t.jindu,speed:100,text:t.jindu+"%","stroke-width":80},model:{value:t.currentRate,callback:function(s){t.currentRate=s},expression:"currentRate"}})],1),t._v(" "),a("div",[t._v(t._s(t.$t("task.progress[1]")))])]),t._v(" "),a("div",[a("div",{staticClass:"isover"},[a("img",{attrs:{src:"./static/newicon/dui.png"}})]),t._v(" "),a("div",{staticStyle:{"margin-top":".3rem"}},[t._v(t._s(t.$t("task.progress[2]"))+"("+t._s(t.listInfo.today_ok_task?t.listInfo.today_ok_task:"0")+")")])])]),t._v(" "),a("van-tabs",{attrs:{ellipsis:!1,border:!1,color:"#eb2a21","title-active-color":"#eb2a21","line-width":"60"},on:{change:t.changeTabs},model:{value:t.tabsIndex,callback:function(s){t.tabsIndex=s},expression:"tabsIndex"}},t._l(t.taskTabs,function(s){return a("van-tab",{key:s.state,attrs:{title:s.text}},[a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isRefresh,callback:function(s){t.isRefresh=s},expression:"isRefresh"}},[a("van-list",{class:{Empty:!t.listData[t.tabsIndex].length},attrs:{finished:t.isFinished,"finished-text":t.listData[t.tabsIndex].length?t.$t("vanPull[0]"):t.$t("vanPull[1]")},on:{load:t.onLoad},model:{value:t.isLoad,callback:function(s){t.isLoad=s},expression:"isLoad"}},t._l(t.listData[t.tabsIndex],function(s,i){return a("van-cell",{key:s.order_id,staticClass:"TaskItem",staticStyle:{"justify-content":"space-between"},attrs:{"title-class":"record",border:!1},on:{click:function(a){return t.onClickCell(s.order_id,s.icon)}}},[a("div",{staticClass:"list-img",attrs:{slot:"icon"},slot:"icon"},[a("a",{attrs:{href:"javascript:;"}},[a("img",{staticClass:"image",attrs:{src:0==s.icon.indexOf("http")?s.icon:t.InitData.setting.up_url+s.icon}})])]),t._v(" "),a("div",{staticStyle:{color:"#333"}},[a("div",{staticClass:"list-title"},[a("div",[t._v(t._s(s.vip_dec))])]),t._v(" "),a("div",[t._v(t._s(s.title))]),t._v(" "),a("div",{staticClass:"flex"},[a("div",[t._v(t._s(t.$t("task.default[6]")))]),t._v(" "),a("div",{staticClass:"red"},[t._v(t._s(s.reward_price)+" "+t._s(t.InitData.currency))])]),t._v(" "),a("div",{staticClass:"list-footer"},[a("div",{staticStyle:{"font-size":".8rem"}},[t._v(t._s(s.add_time))]),t._v(" "),1==s.status?a("div",{staticClass:"sub-btn"},[t._v(t._s(t.$t("task.default[7]")))]):t._e()])])])}),1)],1)],1)}),1)],1),t._v(" "),a("Footer")],1)},staticRenderFns:[]};var n=function(t){a("tHn9")},o=a("VU/8")(i.a,e,!1,n,"data-v-8160d340",null);s.default=o.exports},tHn9:function(t,s){}});